<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="This function executes MIR applying ranger for random forests generation and actual impurity reduction and a modified version of rpart to find surrogate variables."><title>Variable selection with mutual impurity reduction (MIR) — var.select.mir • RFSurrogates</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Variable selection with mutual impurity reduction (MIR) — var.select.mir"><meta property="og:description" content="This function executes MIR applying ranger for random forests generation and actual impurity reduction and a modified version of rpart to find surrogate variables."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">RFSurrogates</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.4</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../news/index.html">Changelog</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"><li class="nav-item">
  <a class="external-link nav-link" href="https://github.com/AGSeifert/RFSurrogates/" aria-label="github">
    <span class="fab fa fab fa-github fa-lg"></span>
     
  </a>
</li>
      </ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Variable selection with mutual impurity reduction (MIR)</h1>
      <small class="dont-index">Source: <a href="https://github.com/AGSeifert/RFSurrogates/blob/HEAD/R/variable_selection_mir.R" class="external-link"><code>R/variable_selection_mir.R</code></a></small>
      <div class="d-none name"><code>var.select.mir.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>This function executes MIR applying <a href="https://rdrr.io/pkg/ranger/man/ranger.html" class="external-link">ranger</a> for random forests generation and actual impurity reduction and a modified version of <a href="https://rdrr.io/pkg/rpart/man/rpart.html" class="external-link">rpart</a> to find surrogate variables.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">var.select.mir</span><span class="op">(</span></span>
<span>  x <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  y <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  num.trees <span class="op">=</span> <span class="fl">500</span>,</span>
<span>  type <span class="op">=</span> <span class="st">"regression"</span>,</span>
<span>  s <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  mtry <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  min.node.size <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  num.threads <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  status <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  save.ranger <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  save.memory <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  num.permutations <span class="op">=</span> <span class="fl">100</span>,</span>
<span>  p.t.sel <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  p.t.rel <span class="op">=</span> <span class="fl">0.01</span>,</span>
<span>  select.var <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  select.rel <span class="op">=</span> <span class="cn">FALSE</span>,</span>
<span>  case.weights <span class="op">=</span> <span class="cn">NULL</span>,</span>
<span>  corr.rel <span class="op">=</span> <span class="cn">TRUE</span>,</span>
<span>  t <span class="op">=</span> <span class="fl">5</span>,</span>
<span>  method.rel <span class="op">=</span> <span class="st">"permutation"</span>,</span>
<span>  method.sel <span class="op">=</span> <span class="st">"janitza"</span>,</span>
<span>  save.rel <span class="op">=</span> <span class="cn">TRUE</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>x</dt>
<dd><p>data.frame of predictor variables with variables in
columns and samples in rows (Note: missing values are not allowed)</p></dd>


<dt>y</dt>
<dd><p>vector with values of phenotype variable (Note: will be converted to factor if
classification mode is used). For survival forests this is the time variable.</p></dd>


<dt>num.trees</dt>
<dd><p>number of trees. Default is 500.</p></dd>


<dt>type</dt>
<dd><p>mode of prediction ("regression", "classification" or "survival"). Default is regression.</p></dd>


<dt>s</dt>
<dd><p>predefined number of surrogate splits (it may happen that the actual number of surrogate splits differs in individual nodes). Default is 1 % of no. of variables.</p></dd>


<dt>mtry</dt>
<dd><p>number of variables to possibly split at in each node. Default is no. of variables^(3/4) ("^3/4") as recommended by (Ishwaran 2011). Also possible is "sqrt" and "0.5" to use the square root or half of the no. of variables.</p></dd>


<dt>min.node.size</dt>
<dd><p>minimal node size. Default is 1.</p></dd>


<dt>num.threads</dt>
<dd><p>number of threads used for parallel execution. Default is number of CPUs available.</p></dd>


<dt>status</dt>
<dd><p>status variable, only applicable to survival data. Use 1 for event and 0 for censoring.</p></dd>


<dt>save.ranger</dt>
<dd><p>set TRUE if ranger object should be saved. Default is that ranger object is not saved (FALSE).</p></dd>


<dt>save.memory</dt>
<dd><p>Use memory saving (but slower) splitting mode. No effect for survival and GWAS data. Warning: This option slows down the tree growing, use only if you encounter memory problems. (This parameter is transfered to ranger)</p></dd>


<dt>num.permutations</dt>
<dd><p>number of permutations to determine p-values. Default is 100. (the relations are determined once based on the permuted X data and the utilized AIR values are permuted again for each permutation )</p></dd>


<dt>p.t.sel</dt>
<dd><p>p.value threshold for selection of important variables. Default is 0.01.</p></dd>


<dt>p.t.rel</dt>
<dd><p>p.value threshold for selection of related variables. Default is 0.01.</p></dd>


<dt>select.var</dt>
<dd><p>set False if only importance should be calculated and no variables should be selected.</p></dd>


<dt>select.rel</dt>
<dd><p>set False if only relations should be calculated and no variables should be selected.</p></dd>


<dt>case.weights</dt>
<dd><p>Weights for sampling of training observations. Observations with larger weights will be selected with higher probability in the bootstrap (or subsampled) samples for the trees.</p></dd>


<dt>corr.rel</dt>
<dd><p>set FALSE if non-corrected variable relations should be used for calculation of MIR. In this case the method "janitza" should not be used for selection of important variables</p></dd>


<dt>t</dt>
<dd><p>variable to calculate threshold for non-corrected relation analysis. Default is 5.</p></dd>


<dt>method.rel</dt>
<dd><p>Method  to  compute  p-values for selection of related variables with var.relations.corr. Use  "janitza"  for  the  method  by  Janitza  et  al. (2016) or "permutation" to utilize permuted variables.</p></dd>


<dt>method.sel</dt>
<dd><p>Method  to  compute  p-values for selection of important variables. Use  "janitza"  for  the  method  by  Janitza  et  al. (2016) (can only be used when corrected variable relations are utilized) or "permutation" to utilize permuted variables.</p></dd>


<dt>save.rel</dt>
<dd><p>set FALSE if relation information should not bet saved (default is TRUE)</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>list with the following components:</p><ul><li><p>info: list with results containing:</p><ul><li><p>MIR: the calculated variable importance for each variable based on mutual impurity reduction.</p></li>
<li><p>pvalue: the obtained p-values for each variable.</p></li>
<li><p>selected: variables has been selected (1) or not (0).</p></li>
<li><p>relations: a list containing the results of variable relation analysis.</p></li>
<li><p>parameters: a list that contains the parameters s, type, mtry, p.t.sel, p.t.rel and method.sel that were used.</p></li>
</ul></li>
<li><p>var: vector of selected variables.</p></li>
<li><p>ranger: ranger object.</p></li>
</ul></div>
    <div class="section level2">
    <h2 id="references">References<a class="anchor" aria-label="anchor" href="#references"></a></h2>
    
<ul><li><p>Nembrini, S. et al. (2018) The revival of the Gini importance? Bioinformatics, 34, 3711–3718. <a href="https://academic.oup.com/bioinformatics/article/34/21/3711/4994791" class="external-link">https://academic.oup.com/bioinformatics/article/34/21/3711/4994791</a></p></li>
<li><p>Seifert, S. et al. (2019) Surrogate minimal depth as an importance measure for variables in random forests. Bioinformatics, 35, 3663–3671. <a href="https://academic.oup.com/bioinformatics/article/35/19/3663/5368013" class="external-link">https://academic.oup.com/bioinformatics/article/35/19/3663/5368013</a></p></li>
</ul></div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="co"># read data</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"SMD_example_data"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># \donttest{</span></span></span>
<span class="r-in"><span><span class="co"># select variables (usually more trees are needed)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/Random.html" class="external-link">set.seed</a></span><span class="op">(</span><span class="fl">42</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">res</span> <span class="op">&lt;-</span> <span class="fu">var.select.mir</span><span class="op">(</span></span></span>
<span class="r-in"><span>  x <span class="op">=</span> <span class="va">SMD_example_data</span><span class="op">[</span>, <span class="fl">2</span><span class="op">:</span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">ncol</a></span><span class="op">(</span><span class="va">SMD_example_data</span><span class="op">)</span><span class="op">]</span>,</span></span>
<span class="r-in"><span>  y <span class="op">=</span> <span class="va">SMD_example_data</span><span class="op">[</span>, <span class="fl">1</span><span class="op">]</span>, s <span class="op">=</span> <span class="fl">10</span>, num.trees <span class="op">=</span> <span class="fl">10</span>, num.threads <span class="op">=</span> <span class="fl">1</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Relations for 10 original variables were not calculated because they were never used as a primary split.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>             Affected relations are set to 0. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Relations for 10 permuted variables were not calculated because they were not used as a primary split.</span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span>             Affected relations are set to 0. </span>
<span class="r-wrn co"><span class="r-pr">#&gt;</span> <span class="warning">Warning: </span>Only few negative importance values found for selection of important variables, inaccurate p-values. Consider the 'permutation' approach.</span>
<span class="r-in"><span><span class="va">res</span><span class="op">$</span><span class="va">var</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1] "X2"     "X3"     "X4"     "cp1_3"  "cp1_5"  "cp2_1"  "cgn_66"</span>
<span class="r-in"><span><span class="co"># }</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by Stephan Seifert, Sven Gundlach, Silke Szymczak, Lukas C. Jarren, Florian Gärber.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

